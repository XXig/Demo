<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>城市生长的力量</title>
    <meta name="x5-fullscreen" content="false">
    <meta name="x5-orientation" content="portrait">
    <meta name="viewport" content="target-densitydpi=device-dpi,width=640,user-scalable=no">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/style.css?4">
    <style type="text/css">
      body,html {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
    }
    .IIV::-webkit-media-controls-play-button,
    .IIV::-webkit-media-controls-start-playback-button {
      opacity: 0;
      pointer-events: none;
      width: 5px;
  }
</style>
</head>
<body>
    <div class="load">
    </div>
    <div class="tips_box"></div>
    <div class="loading_load">
        <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/index.jpg"></div>
        <div class="container main">
            <div class="section def s1">
                <video class="video-box" id="video" data-index="1" x-webkit-airplay="true" webkit-playsinline="true"
                preload="auto" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/zhaoshang_oss/a.mp4?t=778185"
                poster="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/zhe.jpg"></video>
            </div>
            <video id="video" proload="true" x-webkit-airplay="true" webkit-playsinline="true" style="display: block; position: absolute; width: 800px; height: 1200px; x: 0; y: 0; transform-origin: 0% 0% 0px; visibility: visible; transform: matrix(0.5583, 0, 0, 0.5583, -16, 0); opacity: 1;" src="http://game.gtimg.cn/images/feiji/act/a20160707huluwa/huluwavideomin.mp4"> </video>
        </div>

        <div class="index2 pa">
            <div class="t1 J_h1"><img class="" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/00.png"></div>
            <div class="t1 J_h2"><img class="" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/01.png"></div>
            <div class="t1 J_h3"><img class="" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/02.png"></div>
            <div class="t2 J_h4" style="display: none"><img class="" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/03.png"></div>
            <div class="t3 J_h5" style="display: none"><img class="" src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/04.png"></div>
            <div class="t4" ></div>
            <div class="t5" ></div>
        </div>
        <div class="index4" >
            <div class="test1 if"><img src="images/iws/0.png" alt=""></div>
            <div class="z_box"></div>
            <div style="display: none">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/0.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/1.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/2.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/3.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/4.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/5.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/6.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/7.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/8.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/9.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/10.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/11.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/12.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/13.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/14.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/15.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/16.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/17.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/18.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/19.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/20.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/21.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/22.png" alt="">
                <img src="http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/iws/23.png" alt="">
                <div>
                </div>


                <div class="fx"></div>
                <script>
                    window.addEventListener('orientationchange', function () {
                        if (window.orientation == 90 || window.orientation == -90) {
                            $(".tips_box").show()
                            $(".loading_load,.container").hide();
                        } else {
                            $(".tips_box").hide()
                            $(".loading_load,.container").show();
                        }
                    });

                    var music = document.getElementById("audio")
                    var image_path = 'http://videoh5.oss-cn-shenzhen.aliyuncs.com/shanghai/';
                    var images = ["load.gif", "bg0.jpg", "zhe.jpg", "bg3.png", "index.jpg"];
                    var img_count = images.length;

                    function loadImages(sources, callback) {
                        var count = 0,
                        images = {},
                        imgNum = 0;
                        for (src in sources) {
                            imgNum++;
                        }
                        for (src in sources) {
                            images[src] = new Image();
                            images[src].onload = function () {

                                var pre = (count / img_count) * 100;
                                $(".pre1").html(pre.toFixed(2) + "%")

                                if (++count >= imgNum) {
                                    callback(images);
                                }
                            }
                            images[src].src = image_path + sources[src];
                        }
                    }

                    var u = navigator.userAgent;
                    var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端

                    loadImages(images, function (images) {

                        $(".load").hide();
                        $(".loading_load").show();

                        if(isAndroid){
                            setTimeout(function(){
                                $('html, body').animate({
                                    scrollTop: $(document).height()
                                }, 2000, function () {
                                    touch.on(".loading_load", "touchstart", function () {
                                        video.play();
                                        video.loops();
                                        $(".loading_load,.play_btn").hide();
                                        $(".loading_load").remove();
                                    })
                                });
                            },1200)
                        }
                        else{
                            touch.on(".loading_load", "touchstart", function () {
                                $('html, body').animate({
                                    scrollTop: $(document).height()
                                }, 2000, function () {
                                    video.play();
                                    video.loops();
                                    $(".loading_load,.play_btn").hide();
                                    $(".loading_load").remove();
                                })
                            })
                        }
                    })

                    var Cwidth = document.documentElement.clientWidth;
                    var Cheight = document.documentElement.clientHeight;
                    $("#video").css("width", Cwidth).css("height", Cheight)
                    var video = document.getElementById("video");
                    video.addEventListener("canplay", myFunction);
                    function myFunction(e) {
                        $(".play").show();
                        $(".load").hide();
                    }

                    var _time = setTimeout(function () {
                        $(".play_btn").animate({
                            "opacity": 1,
                        }, 1200);
                        clearTimeout(_time);
                    }, 1000)

                    touch.on(".t4", "tap", function () {
                        location = "index.php";
                    })

                    touch.on(".tool2", "tap", function () {
                        $(".code").show();
                    })

                    touch.on(".tool3", "tap", function () {
                        $(".fx").show();
                    })

                    touch.on(".fx", "tap", function () {
                        $(".fx").hide();
                    })
                    video.addEventListener('ended', endPlay);
                    function endPlay() {
                        $(".container").hide();
                        $("video").remove();
                        $(".index2").show();
                        anibtn()
                    }

                    function anibtn() {
                        setTimeout(function () {
                            $(".J_h1").fadeOut(1000);
                        }, 1500);

                        setTimeout(function () {
                            $(".J_h2").animate({marginLeft: "23%","bottom":"31.5%"}, 2000);
                            $(".J_h3").animate({marginLeft: "-23%"}, 2000);
                        }, 1500);

                        setTimeout(function () {
                            $(".J_h2").fadeOut(1000);
                            $(".J_h3").fadeOut(1000);

                            $(".J_h4").fadeIn(1000);
                            $(".J_h5").fadeIn(1000);
                        }, 3200);
                    }

                    HTMLMediaElement.prototype.loops = function () {
                        var self = this;
                        var v_time = this.currentTime;
                        duration = this.duration;
                        var pae = true;
                        if (this.currentTime >= duration) {
                            pae = false;
                        }
                        requestAnimationFrame(function () {
                            if (pae) {
                                self.loops();
                            }
                        });
                    }

                    touch.on(".index4","tap",function(){
                        $('.index4').hide()
                        $(".test1 img").attr("src", "images/iws/0.png")
                    })

                    touch.on(".t5","tap",function(){
                        $('.index4').show()
                        var _img = 0;
                        var _isflag = true;
                        var s=setInterval(function () {
                            if (_img >= 15) {
                                _img=15
                                clearInterval(s);
                            }
                            _img++;
                            $(".test1 img").attr("src", "images/iws/" + _img + ".png")
                        }, 100)
                    })
                </script>
            </body>
            </html>
